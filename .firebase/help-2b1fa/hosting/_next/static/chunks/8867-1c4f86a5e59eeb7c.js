"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8867],{3460:function(t,e,a){a.d(e,{$:function(){return c}});var n=a(74810),r=a(78857),o=a(22263),i=a(4256),s=a(33812);async function c(t,e){async function a(e){if(e.endsWith(s.ny.slice(2))){let a=(0,r.f)((0,n.p5)(e,-64,-32)),i=(0,n.p5)(e,0,-64).slice(2).match(/.{1,64}/g),c=await Promise.all(i.map(e=>s.rC.slice(2)!==e?t.request({method:"eth_getTransactionReceipt",params:[`0x${e}`]},{dedupe:!0}):void 0)),u=c.some(t=>null===t)?100:c.every(t=>t?.status==="0x1")?200:c.every(t=>t?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,o.ly)(a),receipts:c.filter(Boolean),status:u,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[e]})}let{atomic:c=!1,chainId:u,receipts:d,version:l="2.0.0",...f}=await a(e.id),[h,w]=(()=>{let t=f.status;return t>=100&&t<200?["pending",t]:t>=200&&t<300?["success",t]:t>=300&&t<700?["failure",t]:"CONFIRMED"===t?["success",200]:"PENDING"===t?["pending",100]:[void 0,t]})();return{...f,atomic:c,chainId:u?(0,o.ly)(u):void 0,receipts:d?.map(t=>({...t,blockNumber:o.y_(t.blockNumber),gasUsed:o.y_(t.gasUsed),status:i.ew[t.status]}))??[],statusCode:w,status:h,version:l}}},58180:function(t,e,a){a.d(e,{x:function(){return u}});var n=a(91896),r=a(19403),o=a(87324),i=a(71494),s=a(62593),c=a(24481);async function u(t,e){let{account:a=t.account,chainId:u,nonce:d}=e;if(!a)throw new r.o({docsPath:"/docs/eip7702/prepareAuthorization"});let l=(0,n.T)(a),f=(()=>{if(e.executor)return"self"===e.executor?e.executor:(0,n.T)(e.executor)})(),h={address:e.contractAddress??e.address,chainId:u,nonce:d};return void 0===h.chainId&&(h.chainId=t.chain?.id??await (0,i.s)(t,s.L,"getChainId")({})),void 0===h.nonce&&(h.nonce=await (0,i.s)(t,c.K,"getTransactionCount")({address:l.address,blockTag:"pending"}),("self"===f||f?.address&&(0,o.E)(f.address,l.address))&&(h.nonce+=1)),h}},33812:function(t,e,a){a.d(e,{ny:function(){return f},rC:function(){return h},s_:function(){return w}});var n=a(91896),r=a(58465),o=a(23081),i=a(35538),s=a(26431),c=a(22263),u=a(10527),d=a(75307),l=a(54942);let f="0x5792579257925792579257925792579257925792579257925792579257925792",h=(0,u.eC)(0,{size:32});async function w(t,e){let{account:a=t.account,capabilities:w,chain:p=t.chain,experimental_fallback:m,experimental_fallbackDelay:v=32,forceAtomic:y=!1,id:g,version:C="2.0.0"}=e,T=a?(0,n.T)(a):null,b=e.calls.map(t=>{let e=t.abi?(0,i.R)({abi:t.abi,functionName:t.functionName,args:t.args}):t.data;return{data:t.dataSuffix&&e?(0,s.zo)([e,t.dataSuffix]):e,to:t.to,value:t.value?(0,u.eC)(t.value):void 0}});try{let e=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:y,calls:b,capabilities:w,chainId:(0,u.eC)(p.id),from:T?.address,id:g,version:C}]},{retryCount:0});if("string"==typeof e)return{id:e};return e}catch(a){if(m&&("MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name||"UnknownRpcError"===a.name||a.details.toLowerCase().includes("does not exist / is not available")||a.details.toLowerCase().includes("missing or invalid. request()")||a.details.toLowerCase().includes("did not match any variant of untagged enum")||a.details.toLowerCase().includes("account upgraded to unsupported contract")||a.details.toLowerCase().includes("eip-7702 not supported")||a.details.toLowerCase().includes("unsupported wc_ method")||a.details.toLowerCase().includes("feature toggled misconfigured"))){if(w&&Object.values(w).some(t=>!t.optional)){let t="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new o.vl(new r.G(t,{details:t}))}if(y&&b.length>1){let t="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new o.r0(new r.G(t,{details:t}))}let e=[];for(let a of b){let n=(0,l.T)(t,{account:T,chain:p,data:a.data,to:a.to,value:a.value?(0,c.y_)(a.value):void 0});e.push(n),v>0&&await new Promise(t=>setTimeout(t,v))}let a=await Promise.allSettled(e);if(a.every(t=>"rejected"===t.status))throw a[0].reason;let n=a.map(t=>"fulfilled"===t.status?t.value:h);return{id:(0,s.zo)([...n,(0,u.eC)(p.id,{size:32}),f])}}throw(0,d.$)(a,{...e,account:T,chain:e.chain})}}},54942:function(t,e,a){a.d(e,{T:function(){return y}});var n=a(91896),r=a(19403),o=a(58465),i=a(78867),s=a(47132),c=a(75307),u=a(73999),d=a(83617),l=a(71494),f=a(87304),h=a(47634),w=a(62593),p=a(46061),m=a(10266);let v=new f.k(128);async function y(t,e){let{account:a=t.account,chain:f=t.chain,accessList:y,authorizationList:g,blobs:C,data:T,gas:b,gasPrice:E,maxFeePerBlobGas:_,maxFeePerGas:N,maxPriorityFeePerGas:R,nonce:k,type:x,value:I,...q}=e;if(void 0===a)throw new r.o({docsPath:"/docs/actions/wallet/sendTransaction"});let P=a?(0,n.T)(a):null;try{(0,h.F)(e);let a=await (async()=>e.to?e.to:null!==e.to&&g&&g.length>0?await (0,i.z)({authorization:g[0]}).catch(()=>{throw new o.G("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(P?.type==="json-rpc"||null===P){let e;null!==f&&(e=await (0,l.s)(t,w.L,"getChainId")({}),(0,s.q)({currentChainId:e,chain:f}));let n=t.chain?.formatters?.transactionRequest?.format,r=(n||d.tG)({...(0,u.K)(q,{format:n}),accessList:y,authorizationList:g,blobs:C,chainId:e,data:T,from:P?.address,gas:b,gasPrice:E,maxFeePerBlobGas:_,maxFeePerGas:N,maxPriorityFeePerGas:R,nonce:k,to:a,type:x,value:I}),o=v.get(t.uid);try{return await t.request({method:o?"wallet_sendTransaction":"eth_sendTransaction",params:[r]},{retryCount:0})}catch(e){if(!1===o)throw e;if("InvalidInputRpcError"===e.name||"InvalidParamsRpcError"===e.name||"MethodNotFoundRpcError"===e.name||"MethodNotSupportedRpcError"===e.name)return await t.request({method:"wallet_sendTransaction",params:[r]},{retryCount:0}).then(e=>(v.set(t.uid,!0),e)).catch(a=>{if("MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name)throw v.set(t.uid,!1),e;throw a});throw e}}if(P?.type==="local"){let e=await (0,l.s)(t,p.ZE,"prepareTransactionRequest")({account:P,accessList:y,authorizationList:g,blobs:C,chain:f,data:T,gas:b,gasPrice:E,maxFeePerBlobGas:_,maxFeePerGas:N,maxPriorityFeePerGas:R,nonce:k,nonceManager:P.nonceManager,parameters:[...p.QZ,"sidecars"],type:x,value:I,...q,to:a}),n=f?.serializers?.transaction,r=await P.signTransaction(e,{serializer:n});return await (0,l.s)(t,m.p,"sendRawTransaction")({serializedTransaction:r})}if(P?.type==="smart")throw new r.Y({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new r.Y({docsPath:"/docs/actions/wallet/sendTransaction",type:P?.type})}catch(t){if(t instanceof r.Y)throw t;throw(0,c.$)(t,{...e,account:P,chain:e.chain||void 0})}}},58896:function(t,e,a){a.d(e,{l:function(){return f}});var n=a(58465);class r extends n.G{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}var o=a(71494),i=a(83013),s=a(38605),c=a(52763),u=a(46268),d=a(34148),l=a(3460);async function f(t,e){let a;let{id:n,pollingInterval:f=t.pollingInterval,status:w=({statusCode:t})=>200===t||t>=300,retryCount:p=4,retryDelay:m=({count:t})=>200*~~(1<<t),timeout:v=6e4,throwOnFailure:y=!1}=e,g=(0,d.P)(["waitForCallsStatus",t.uid,n]),{promise:C,resolve:T,reject:b}=(0,c.n)(),E=(0,i.N7)(g,{resolve:T,reject:b},e=>{let i=(0,s.$)(async()=>{let s=t=>{clearTimeout(a),i(),t(),E()};try{let a=await (0,u.J)(async()=>{let e=await (0,o.s)(t,l.$,"getCallsStatus")({id:n});if(y&&"failure"===e.status)throw new r(e);return e},{retryCount:p,delay:m});if(!w(a))return;s(()=>e.resolve(a))}catch(t){s(()=>e.reject(t))}},{interval:f,emitOnBegin:!0});return i});return a=v?setTimeout(()=>{E(),clearTimeout(a),b(new h({id:n}))},v):void 0,await C}class h extends n.G{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}},47132:function(t,e,a){a.d(e,{q:function(){return r}});var n=a(59374);function r({chain:t,currentChainId:e}){if(!t)throw new n.Bk;if(e!==t.id)throw new n.Yl({chain:t,currentChainId:e})}},75307:function(t,e,a){a.d(e,{$:function(){return i}});var n=a(14828),r=a(6682),o=a(7896);function i(t,{docsPath:e,...a}){let i=(()=>{let e=(0,o.k)(t,a);return e instanceof n.cj?t:e})();return new r.mk(i,{docsPath:e,...a})}}}]);