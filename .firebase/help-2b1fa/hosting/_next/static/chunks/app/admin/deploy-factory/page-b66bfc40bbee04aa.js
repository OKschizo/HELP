(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4916],{59677:function(e,t,a){Promise.resolve().then(a.bind(a,39832))},39832:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var s=a(59533),l=a(31229),r=a(3810),n=a(64566),o=a(11394),i=a(77732),c=a(42981),d=a(76987),m=a(76760),u=a(96868),x=a(77295),p=a(38745),h=a(73236),g=a(26431),y=a(46991),f=a(84707),b=a(35045);function v(e){var t,a;return null!==(a=null!==(t=null==e?void 0:e.shortMessage)&&void 0!==t?t:null==e?void 0:e.message)&&void 0!==a?a:"Execution reverted"}function j(e){var t,a,s,l,r;return null!==(r=null!==(l=null==e?void 0:e.code)&&void 0!==l?l:null==e?void 0:null===(t=e.cause)||void 0===t?void 0:t.code)&&void 0!==r?r:null==e?void 0:null===(s=e.cause)||void 0===s?void 0:null===(a=s.cause)||void 0===a?void 0:a.code}function N(e,t,a){var s,l,r,n,o,i;let c=null!==(o=null!==(n=null==e?void 0:e.data)&&void 0!==n?n:null==e?void 0:null===(s=e.cause)||void 0===s?void 0:s.data)&&void 0!==o?o:null==e?void 0:null===(r=e.cause)||void 0===r?void 0:null===(l=r.cause)||void 0===l?void 0:l.data,d=v(e);if(console.error("Full error object:",{message:null==e?void 0:e.message,shortMessage:null==e?void 0:e.shortMessage,data:c,cause:null==e?void 0:e.cause,details:null==e?void 0:e.details,code:j(e),stack:null==e?void 0:e.stack}),c&&"string"==typeof c&&t)try{let e=(0,b.p)({abi:t,data:c}),a=null===(i=e.args)||void 0===i?void 0:i.map(String).join(", ");return"".concat(d," — ").concat(e.errorName).concat(a?"(".concat(a,")"):"")}catch(e){}return!function(e){let t=j(e),a=(v(e)||"").toLowerCase(),s=((null==e?void 0:e.details)||"").toLowerCase();return -32603===t||a.includes("internal json-rpc error")||s.includes("internal json-rpc error")}(e)?d:"".concat(d," — Node returned -32603 (Internal JSON-RPC). ")+"Common causes: block gas limit exceeded for lane, RPC estimation bug, or chain config mismatch."}async function w(e,t){for(let a of[{method:"evmUserModify",params:[{usingBigBlocks:!1}]},{method:"hyperevm_userModify",params:[{usingBigBlocks:!1}]},{method:"hyperliquid_evmUserModify",params:[{usingBigBlocks:!1}]},{method:"evmUserModify",params:[{type:"evmUserModify",usingBigBlocks:!1}]}])try{if("function"==typeof(null==e?void 0:e.request))return await e.request({method:a.method,params:a.params}),t("Disabled big-block mode via ".concat(a.method),"info"),!0}catch(e){}return t("Big-block disable RPC not available; you may still be on large blocks","warning"),!1}async function k(e){for(let t of["bigBlockGasPrice","hyperevm_bigBlockGasPrice","hyperliquid_bigBlockGasPrice"])try{if("function"==typeof(null==e?void 0:e.request)){let a=await e.request({method:t,params:[]});if("string"==typeof a)return a.startsWith("0x"),BigInt(a);if("number"==typeof a)return BigInt(a);if("bigint"==typeof a)return a}}catch(e){}return null}function C(){let{address:e}=(0,r.m)(),[t,a]=(0,l.useState)("implementation"),[b,v]=(0,l.useState)(""),[j,C]=(0,l.useState)(""),[D,F]=(0,l.useState)(250),{implementation:S,factory:I,allLogs:A,clearAllLogs:B,isAnyDeploying:P}=function(){let e=function(){let{address:e}=(0,r.m)(),{data:t}=(0,i.p)(),a=(0,c.t)();(0,d.x)();let{switchChain:s}=(0,m.o)(),[n,o]=(0,l.useState)([]),[p,h]=(0,l.useState)(void 0),[g,f]=(0,l.useState)(void 0),[b,v]=(0,l.useState)(!1),{isLoading:j,isSuccess:C}=(0,u.A)({hash:g}),D=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2?arguments[2]:void 0;o(s=>[...s,{timestamp:Date.now(),message:e,type:t,txHash:a}])},[]),F=(0,l.useCallback)(async()=>{if(!e||!t||!a){D("Please connect your wallet first","error");return}let l=y.eF;try{let r,n;v(!0),D("Starting Implementation deployment...","info");let o=Math.max(0,(l.length-2)/2);if(D("Contract bytecode size: ".concat(o," bytes (").concat((o/1024).toFixed(2)," KB)"),"info"),await t.getChainId()!==999){D("Switching to Hyperliquid chain (".concat(999,")..."),"info"),await s({chainId:999});let e=await t.getChainId();if(999!==e)throw Error("Failed to switch to chain ".concat(999,". Current chain: ").concat(e));D("✅ Successfully switched to chain ".concat(999),"info")}let i=await a.getBalance({address:e});D("Deployer balance: ".concat(i," wei"),"info");try{let e=await k(a);r=e&&e>0n?e:await a.getGasPrice()}catch(e){r=(0,x.L)("2")}try{n=await a.estimateGas({account:e,data:l})}catch(e){n=BigInt(1400000n!=null?1400000n:7e6),D("Gas estimation failed, using fallback: ".concat(n.toString()),"warning")}D("\uD83C\uDFAF Sending raw CREATE tx (gas=".concat(n,", gasPrice=").concat(r,")"),"info");let c=await t.sendTransaction({account:e,to:void 0,data:l,value:0n,gas:n,gasPrice:r});f(c),D("Implementation deployment tx: ".concat(c),"success",c),D("Waiting for confirmation (large blocks ~60s cadence)...","info")}catch(e){D("Implementation deployment failed: ".concat(N(e,y.Mt,l)),"error"),console.error(e),v(!1);try{await w(a,D)}catch(e){}return}try{await w(a,D)}catch(e){}},[e,t,a,s,D]);return(0,l.useEffect)(()=>{C&&g&&a&&a.getTransactionReceipt({hash:g}).then(e=>{e.contractAddress&&(h(e.contractAddress),D("Implementation contract deployed at: ".concat(e.contractAddress),"success"),D("Note: An Initialized(max) event at deployment is expected here; the implementation constructor disables initializers.","info")),v(!1)}).catch(e=>{D("Failed to get contract address: ".concat(e.message),"error"),v(!1)})},[C,g,a,D]),{deployImplementation:F,logs:n,clearLogs:(0,l.useCallback)(()=>{o([]),h(void 0),f(void 0)},[]),isDeploying:b||j,deployedAddress:p,txHash:g}}(),t=function(){let{address:e}=(0,r.m)(),{data:t}=(0,i.p)(),a=(0,c.t)();(0,d.x)();let{switchChain:s}=(0,m.o)(),[n,o]=(0,l.useState)([]),[y,b]=(0,l.useState)(void 0),[v,j]=(0,l.useState)(void 0),[w,k]=(0,l.useState)(!1),{isLoading:C,isSuccess:D}=(0,u.A)({hash:v}),F=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2?arguments[2]:void 0;o(s=>[...s,{timestamp:Date.now(),message:e,type:t,txHash:a}])},[]),S=(0,l.useCallback)(async function(l,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;if(!e||!t||!a){F("Please connect your wallet first","error");return}if(!l)return F("Implementation address is required","error");if(!r)return F("Platform fee receiver address is required","error");try{let e=await a.getCode({address:l});if(!e||"0x"===e)return F("No code found at implementation address","error");if(e.length<=122||e.includes("5af43d82803e903d91602b57fd5bf3"))return F("Provided implementation address appears to be a minimal proxy clone. Use the logic implementation address from Step 1.","error")}catch(e){}let o=(0,p.E)((0,h.n)("address implementation_, address platformAddress_, uint96 platformFeeBps_"),[l,r,BigInt(n)]),i=f.eF,c=(0,g.zo)([i,o]);try{let o,i;if(k(!0),F("Starting Factory deployment...","info"),F("Implementation: ".concat(l),"info"),F("Platform Fee Receiver: ".concat(r),"info"),F("Platform Fee: ".concat((n/100).toFixed(2),"%"),"info"),await t.getChainId()!==999){F("Switching to Hyperliquid chain (".concat(999,")..."),"info"),await s({chainId:999});let e=await t.getChainId();if(999!==e)throw Error("Failed to switch to chain ".concat(999,". Current chain: ").concat(e));F("✅ Successfully switched to chain ".concat(999),"info")}try{o=await a.getGasPrice()}catch(e){o=(0,x.L)("2")}try{i=await a.estimateGas({account:e,data:c})}catch(e){i=6000000n,F("Gas estimation failed, using fallback: ".concat(i.toString()),"warning")}F("\uD83C\uDFAF Sending raw CREATE tx (gas=".concat(i,", gasPrice=").concat(o,")"),"info");let d=await t.sendTransaction({account:e,to:void 0,data:c,value:0n,gas:i,gasPrice:o});j(d),F("Factory deployment tx: ".concat(d),"success",d),F("Waiting for confirmation...","info")}catch(e){F("Factory deployment failed: ".concat(N(e,f.Mt,c)),"error"),console.error(e),k(!1)}},[e,t,a,s,F]);return(0,l.useEffect)(()=>{D&&v&&a&&a.getTransactionReceipt({hash:v}).then(e=>{e.contractAddress&&(b(e.contractAddress),F("Factory contract deployed at: ".concat(e.contractAddress),"success")),k(!1)}).catch(e=>{F("Failed to get contract address: ".concat(e.message),"error"),k(!1)})},[D,v,a,F]),{deployFactory:S,logs:n,clearLogs:(0,l.useCallback)(()=>{o([]),b(void 0),j(void 0)},[]),isDeploying:w||C,deployedAddress:y,txHash:v}}(),a=[...e.logs,...t.logs].sort((e,t)=>e.timestamp-t.timestamp),s=(0,l.useCallback)(()=>{e.clearLogs(),t.clearLogs()},[e.clearLogs,t.clearLogs]);return{implementation:e,factory:t,allLogs:a,clearAllLogs:s,isAnyDeploying:e.isDeploying||t.isDeploying}}(),L=async()=>{await S.deployImplementation()};(0,l.useEffect)(()=>{S.deployedAddress&&v(S.deployedAddress)},[S.deployedAddress]);let E=async()=>{b&&j&&await I.deployFactory(b,j,D)},M=b&&"implementation"===t,_=b&&j&&"factory"===t,T=e&&"0x97ec9428a7cbc648e03896f48f176d1b1859475e"===e.toLowerCase();return(0,s.jsx)(n.AuthGuard,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Deploy HyperLaunch V2 Factory"}),(0,s.jsx)("p",{className:"text-gray-300 text-lg",children:"3-Step deployment process with EIP-1167 minimal proxy pattern"})]}),!e&&(0,s.jsx)("div",{className:"text-center mb-8",children:(0,s.jsx)(o.R,{})}),e&&!T&&(0,s.jsx)("div",{className:"text-center text-sm text-gray-300 mb-8",children:"This page is restricted."}),e&&T&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Deployment Progress"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 ".concat("implementation"===t?"text-yellow-400":b?"text-green-400":"text-gray-400"),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-2 ".concat("implementation"===t?"border-yellow-400 bg-yellow-400/20":b?"border-green-400 bg-green-400/20":"border-gray-400"),children:b?"✓":"1"}),(0,s.jsx)("span",{children:"Deploy Implementation"})]}),(0,s.jsx)("div",{className:"h-px bg-gray-400 flex-1"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ".concat("factory"===t?"text-yellow-400":I.deployedAddress?"text-green-400":"text-gray-400"),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-2 ".concat("factory"===t?"border-yellow-400 bg-yellow-400/20":I.deployedAddress?"border-green-400 bg-green-400/20":"border-gray-400"),children:I.deployedAddress?"✓":"2"}),(0,s.jsx)("span",{children:"Deploy Factory"})]}),(0,s.jsx)("div",{className:"h-px bg-gray-400 flex-1"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 ".concat("complete"===t?"text-green-400":"text-gray-400"),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center border-2 ".concat("complete"===t?"border-green-400 bg-green-400/20":"border-gray-400"),children:"complete"===t?"✓":"3"}),(0,s.jsx)("span",{children:"Complete"})]})]})]}),"implementation"===t&&(0,s.jsxs)("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Step 1: Deploy Implementation Contract"}),(0,s.jsx)("p",{className:"text-gray-300 mb-6",children:"Deploy the master template contract that will be cloned for each NFT collection. This is deployed once and reused for all collections."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Implementation Address (after deployment)"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"0x... (will be filled after deployment)",className:"w-full px-4 py-2 bg-black/40 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:L,disabled:S.isDeploying,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:S.isDeploying?"Deploying...":"Deploy Implementation"}),M&&(0,s.jsx)("button",{onClick:()=>a("factory"),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Continue to Factory →"})]})]})]}),"factory"===t&&(0,s.jsxs)("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Step 2: Deploy Factory Contract"}),(0,s.jsx)("p",{className:"text-gray-300 mb-6",children:"Deploy the factory contract that will create minimal proxy clones of the implementation."}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Implementation Address"}),(0,s.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 bg-black/40 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform Fee Receiver"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>C(e.target.value),placeholder:"0x... (your platform wallet address)",className:"w-full px-4 py-2 bg-black/40 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform Fee (basis points)"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"number",value:D,onChange:e=>F(Number(e.target.value)),min:"0",max:"1000",className:"flex-1 px-4 py-2 bg-black/40 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none"}),(0,s.jsxs)("span",{className:"text-gray-300",children:["(",(D/100).toFixed(1),"%)"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"250 = 2.5%, 500 = 5%, etc. Max 1000 (10%)"})]}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:()=>a("implementation"),className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"← Back to Implementation"}),(0,s.jsx)("button",{onClick:E,disabled:!_||I.isDeploying,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:I.isDeploying?"Deploying...":"Deploy Factory"})]})]})]}),"complete"===t&&(0,s.jsxs)("div",{className:"bg-black/20 rounded-xl p-6 border border-green-500/20",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-green-400 mb-4",children:"✅ Deployment Complete!"}),(0,s.jsx)("p",{className:"text-gray-300 mb-6",children:"Your V2 factory has been deployed successfully. You can now create gas-efficient NFT collections."}),(0,s.jsxs)("div",{className:"bg-green-900/20 border border-green-500/20 rounded-lg p-4 mb-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-green-400 mb-2",children:"Deployed Addresses:"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Implementation:"}),(0,s.jsx)("span",{className:"text-white ml-2 font-mono",children:b})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Factory:"}),(0,s.jsx)("span",{className:"text-white ml-2 font-mono",children:I.deployedAddress})]})]})]}),(0,s.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-500/20 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-yellow-400 mb-2",children:"Next Steps:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm text-gray-300",children:[(0,s.jsx)("li",{children:"Update your app configuration with the factory address"}),(0,s.jsx)("li",{children:"Update the frontend to use the V2 factory ABI"}),(0,s.jsx)("li",{children:"Test the deployment by creating a test collection"}),(0,s.jsx)("li",{children:"Restart your development server"})]})]})]}),(0,s.jsxs)("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Deployment Logs"}),(0,s.jsx)("button",{onClick:B,className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm transition-colors",children:"Clear Logs"})]}),(0,s.jsx)("div",{className:"bg-black/40 rounded-lg p-4 max-h-64 overflow-y-auto",children:0===A.length?(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"No deployment activity yet..."}):(0,s.jsx)("div",{className:"space-y-2",children:A.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm flex items-start space-x-2 ".concat("error"===e.type?"text-red-400":"success"===e.type?"text-green-400":"warning"===e.type?"text-yellow-400":"text-gray-300"),children:[(0,s.jsx)("span",{className:"text-gray-500 text-xs mt-0.5 w-16 flex-shrink-0",children:new Date(e.timestamp).toLocaleTimeString()}),(0,s.jsx)("span",{children:e.message}),e.txHash&&(0,s.jsx)("a",{href:"https://explorer.hyperliquid.xyz/tx/".concat(e.txHash),target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-xs underline ml-2",children:"[TX]"})]},t))})})]}),(0,s.jsxs)("div",{className:"bg-black/20 rounded-xl p-6 border border-purple-500/20",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"V2 Factory Benefits"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-green-400",children:"⚡ Gas Savings"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"90% less gas cost per deployment (~200K vs ~2M gas)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-400",children:"\uD83C\uDFD7️ EIP-1167 Clones"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Industry standard minimal proxy pattern"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-purple-400",children:"\uD83D\uDCB0 Platform Fees"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"Built-in platform fee collection system"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-yellow-400",children:"\uD83D\uDD10 MetaMask Deploy"}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:"No private key management needed"})]})]})]})]})]})})})}}},function(e){e.O(0,[4729,8114,2719,487,799,281,1631,8867,2508,6833,5742,4170,6842,1744],function(){return e(e.s=59677)}),_N_E=e.O()}]);